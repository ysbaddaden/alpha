<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
<head>
</head>
<body>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <script type="text/javascript" src="jsunit.js"></script>
  <script type="text/javascript" src="../compat/array.js"></script>
  <script type="text/javascript" src="../compat/core.js"></script>
  <script type="text/javascript" src="../compat/element.js"></script>
  <script type="text/javascript" src="../addons/element.js"></script>

  <div id="test">test</div>
  <div id="toto">
    <div id="tata">tata</div>
  </div>
  
  <input type="text" name="titi" style="display:none"/>

<script type="text/javascript">

jsUnit.add("Element.prototype.insertAfter()", function()
{
  var toto = document.getElementById('toto');
  var tata = document.getElementById('tata');
  
  var next1 = document.createElement('div');
  next1.appendChild(document.createTextNode('next1'));
  next1.id = 'next1';

  toto.insertAfter(next1, tata);

  var next2 = document.createElement('div');
  next2.appendChild(document.createTextNode('next2'));
  next2.id = 'next2';

  toto.insertAfter(next2, tata);
  
//  jsUnit.assertEquals(elm.id, 'test');
});

jsUnit.add("Element.prototype.get('childElementCount')", function()
{
  var count = document.getElementById('toto').get('childElementCount');
  jsUnit.assertEquals(count, 3);
});

jsUnit.add("Element.prototype.get('children')", function()
{
  var children = document.getElementById('toto').get('children');
  jsUnit.assertEquals(children[0].id, 'tata');
  jsUnit.assertEquals(children[1].id, 'next2');
  jsUnit.assertEquals(children[2].id, 'next1');
});

jsUnit.add("Element.prototype.get('firstElementChild')", function()
{
  var child = document.getElementById('toto').get('firstElementChild');
  jsUnit.assertEquals(child.id, 'tata');
});

jsUnit.add("Element.prototype.get('lastElementChild')", function()
{
  var child = document.getElementById('toto').get('lastElementChild');
  jsUnit.assertEquals(child.id, 'next1');
});

jsUnit.add("Element.prototype.get('nextElementSibling')", function()
{
  var sibling = document.getElementById('tata').get('nextElementSibling');
  jsUnit.assertEquals(sibling.id, 'next2');
  
  var sibling = document.getElementById('next1').get('nextElementSibling');
  jsUnit.assertEquals(sibling, null);
});

jsUnit.add("Element.prototype.get('previousElementSibling')", function()
{
  var sibling = document.getElementById('next1').get('previousElementSibling');
  jsUnit.assertEquals(sibling.id, 'next2');
  
  var sibling = document.getElementById('tata').get('previousElementSibling');
  jsUnit.assertEquals(sibling, null);
});


if (Element.prototype.__defineGetter__)
{
  jsUnit.add("Element.prototype.childElementCount", function()
  {
    var count = document.getElementById('toto').childElementCount;
    jsUnit.assertEquals(count, 3);
  });

  jsUnit.add("Element.prototype.children", function()
  {
    var children = document.getElementById('toto').children;
    jsUnit.assertEquals(children[0].id, 'tata');
    jsUnit.assertEquals(children[1].id, 'next2');
    jsUnit.assertEquals(children[2].id, 'next1');
  });

  jsUnit.add("Element.prototype.firstElementChild", function()
  {
    var child = document.getElementById('toto').firstElementChild;
    jsUnit.assertEquals(child.id, 'tata');
  });

  jsUnit.add("Element.prototype.lastElementChild", function()
  {
    var child = document.getElementById('toto').lastElementChild;
    jsUnit.assertEquals(child.id, 'next1');
  });

  jsUnit.add("Element.prototype.nextElementSibling", function()
  {
    var sibling = document.getElementById('tata').nextElementSibling;
    jsUnit.assertEquals(sibling.id, 'next2');
    
    var sibling = document.getElementById('next1').nextElementSibling;
    jsUnit.assertEquals(sibling, null);
  });

  jsUnit.add("Element.prototype.previousElementSibling", function()
  {
    var sibling = document.getElementById('next1').previousElementSibling;
    jsUnit.assertEquals(sibling.id, 'next2');
    
    var sibling = document.getElementById('tata').previousElementSibling;
    jsUnit.assertEquals(sibling, null);
  });
}

jsUnit.run();

</script>

</body>
</html>
